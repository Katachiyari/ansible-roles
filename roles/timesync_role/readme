---
- name: Exemple avancé d'utilisation de timesync_role
  hosts: all
  become: true

  vars:
    timesync_role_manage: true

    # Forcer chrony comme backend
    timesync_role_backend: "chrony"

    # Serveurs NTP personnalisés (ex: infra d'entreprise)
    timesync_role_ntp_servers:
      - "ntp1.example.com"
      - "ntp2.example.com"

    timesync_role_enable_service: true
    timesync_role_ensure_running: true

  roles:
    - role: timesync_role
##############################
A. Laisser le rôle choisir automatiquement le backend
YAML
vars:
  timesync_role_backend: ""   # vide
  timesync_role_ntp_servers:
    - "0.fr.pool.ntp.org"
    - "1.fr.pool.ntp.org"
Sur une machine systemd, il choisira timesyncd par défaut.
##############################
B. Désactiver complètement la gestion NTP dans un environnement
YAML
vars:
  timesync_role_manage: false
##############################
C. Forcer ntp legacy sur de vieilles machines
YAML
vars:
  timesync_role_backend: "ntp"
  timesync_role_ntp_servers:
    - "ntp.local.lan"
