# Exemple d'utilisation du rôle Ansible file_role
---
---
- name: Exemple d'utilisation avancée du rôle file_role
  hosts: all
  become: true

  vars:
    file_role_items:
      # 1. Créer un répertoire web
      - path: /var/www/myapp
        state: directory
        owner: www-data
        group: www-data
        mode: "0755"

      # 2. Créer un sous-répertoire uploads avec permissions différentes
      - path: /var/www/myapp/uploads
        state: directory
        owner: www-data
        group: www-data
        mode: "0775"

      # 3. Créer un fichier vide (touch)
      - path: /var/www/myapp/.env
        state: touch
        owner: www-data
        group: www-data
        mode: "0640"

      # 4. Créer un lien symbolique vers le dossier myapp
      - path: /var/www/current
        state: link
        src: /var/www/myapp

      # 5. Supprimer un ancien dossier si présent
      - path: /tmp/old_data
        state: absent

  roles:
    - role: file_role